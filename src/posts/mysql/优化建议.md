---
date: 2024-06-03
category:
  - 数据库
tag:
  - MySQL
  - 优化
excerpt: 优化建议，持续更新中
order: 99
---

# 优化建议

- 尽可能的使用索引，最好是覆盖索引或主键索引
- 避免使用 `SELECT *`，只查询需要的字段
- 深度分页优化
- 避免多表 `JOIN`，最好不要超过 3 个表
  - 可以考虑增加冗余字段
  - 尽量使用小表驱动大表
- 避免隐式转换
- 使用合适的字段类型，尽量使用更小的字段类型
  - 对于一些不可能为负数的数据，可以将字段设置为 unsigned
  - 日期类型不要使用字符串
  - 金额使用 decimal
- 尽量使用自定义的有序主键
- 尽量为列设置默认值，最好不为 NULL
- 尽量用 `UNION ALL` 代替 `UNION`
  - `UNION ALL` 会有去重操作
- 尽量使用批量操作，但不要过大
- 使用 EXPLAIN 分析 SQL 语句
- 尽量不在数据库做运算，复杂运算需移到业务应用里完成
- 避免使用子查询，可以把子查询优化为连接查询
  - 子查询的结果集无法使用索引，通常子查询的结果集会被存储到临时表中，不论是内存临时表还是磁盘临时表都不会存在索引，所以查询性能会受到一定的影响
  - 由于子查询会产生大量的临时表也没有索引，所以会消耗过多的 CPU 和 IO 资源，产生大量的慢查询
- 可以考虑使用近似值来替代 `COUNT` 查询
- 拆分复杂的大 SQL 为多个小 SQL
- 避免产生大事务操作

## 参考

- [MySQL高性能优化规范建议总结](https://javaguide.cn/database/mysql/mysql-high-performance-optimization-specification-recommendations.html)
